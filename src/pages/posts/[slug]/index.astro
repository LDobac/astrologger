---
import { slug as slugger } from "github-slugger";
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "@layouts/Layout.astro";
import PostLayout from "@layouts/PostLayout.astro";

export async function getStaticPaths () {
    const posts = await getCollection("posts");

    return posts.map((post) => {
        return {
            params: {
                slug: slugger(post.data.title)
            },
            props: {
                post
            }
        };
    });
}

interface Props {
    post: CollectionEntry<"posts">
}

const { post } = Astro.props;

---

<Layout title="this is post page">
    <PostLayout post={post} />
</Layout>
